# Example environment file for `xp` (use with systemd `EnvironmentFile=` or OpenRC `source`).
#
# Copy to a real location (example: /etc/xp/xp.env) and adjust to your deployment.

# Data directory (default: ./data)
XP_DATA_DIR=/var/lib/xp/data

# Optional admin bearer token (default: empty string)
XP_ADMIN_TOKEN=

# Xray gRPC API address (default: 127.0.0.1:10085)
XP_XRAY_API_ADDR=127.0.0.1:10085

# Xray probe interval (default: 2, allowed range: 1..=30)
XP_XRAY_HEALTH_INTERVAL_SECS=2

# Consecutive probe failures before reporting down (default: 3, allowed range: 1..=10)
XP_XRAY_HEALTH_FAILS_BEFORE_DOWN=3

# Xray restart strategy (default: none; xp-ops deploy sets based on init system)
# - none: probe only, no restart request
# - systemd: systemctl restart xray.service (requires policy/polkit)
# - openrc: doas -n /sbin/rc-service xray restart (requires doas.conf)
XP_XRAY_RESTART_MODE=systemd

# Restart cooldown to avoid restart storms (default: 30, allowed range: 1..=3600)
XP_XRAY_RESTART_COOLDOWN_SECS=30

# Restart command timeout (default: 5, allowed range: 1..=60)
XP_XRAY_RESTART_TIMEOUT_SECS=5

# systemd unit / OpenRC service names (defaults shown)
XP_XRAY_SYSTEMD_UNIT=xray.service
XP_XRAY_OPENRC_SERVICE=xray

# Optional quota knobs
# XP_QUOTA_POLL_INTERVAL_SECS default: 10 (allowed range: 5..=30)
XP_QUOTA_POLL_INTERVAL_SECS=10

# XP_QUOTA_AUTO_UNBAN default: true
XP_QUOTA_AUTO_UNBAN=true
